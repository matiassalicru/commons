"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.SuggestedHourButton=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=require("react"),_InputHour=require("../InputHour/InputHour"),_ModalSuggestionOptions=require("./modal-suggestion-options/ModalSuggestionOptions"),_SuggestedHourButton=require("./SuggestedHourButton.style"),_jsxRuntime=require("react/jsx-runtime");function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){(0,_defineProperty2.default)(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}var MAX_HOUR=24,MAX_MINUTES=60,LETTER_HOUR="h",LETTER_MINUTES="m",KEY_ENTER="Enter",KEY_ESC="Escape",KEY_TAB="Tab",SuggestedHourButton=function(a){var b=a.hour,c=a.minutes,d=a.handleDeleteSuggestion,e=void 0===d?function(){return null}:d,f=a.handleAcceptSuggestion,g=void 0===f?function(){return null}:f,h=a.wordings,i=a.eventLog,j=a.taskId,k=(0,_react.useRef)(null),l=(0,_react.useRef)(null),m=(0,_react.useRef)(null),n=(0,_react.useState)(!1),o=(0,_slicedToArray2.default)(n,2),p=o[0],q=o[1],r=(0,_react.useState)({hour:0,minutes:0}),s=(0,_slicedToArray2.default)(r,2),t=s[0],u=s[1],v=(0,_react.useState)(!1),w=(0,_slicedToArray2.default)(v,2),x=w[0],y=w[1],z=(0,_react.useState)(!1),A=(0,_slicedToArray2.default)(z,2),B=A[0],C=A[1],D=function(){var a;null===i||void 0===i||null===(a=i.suggestedDelete)||void 0===a?void 0:a.call(i,!0),e(),x&&y(!1)},E=function(){return document.getElementById("SCWrapperIconTrash-".concat(j))},F=function(){var a,b=E();null===b||void 0===b||null===(a=b.style)||void 0===a?void 0:a.removeProperty("display")},G=function(){var a=E();a&&(a.style.display="none")};(0,_react.useEffect)(function(){return u({hour:b,minutes:c})},[b,c]),(0,_react.useEffect)(function(){var a=function(a){var d=a.path||a.composedPath&&a.composedPath();if(!d.some(function(a){var b,c,d=a.id;return(null===d||void 0===d||null===(b=d.includes)||void 0===b?void 0:b.call(d,"SCSHBWrapper".concat(j)))||(null===d||void 0===d||null===(c=d.includes)||void 0===c?void 0:c.call(d,"SCSHBWrapperModalOptions".concat(j)))})&&p){if(q(!1),(t.hour!==b||t.minutes!==c)&&(t.hour||t.minutes)){var e;null===i||void 0===i||null===(e=i.suggestedConfirm)||void 0===e?void 0:e.call(i,!0),g({hour:t.hour,minutes:t.minutes,edited:x}),y(!1)}t.hour||t.minutes||D(),F()}};return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}},[p,t,x]);var H=function(a,b){return b===LETTER_HOUR?u(_objectSpread(_objectSpread({},t),{},{hour:a})):u(_objectSpread(_objectSpread({},t),{},{minutes:a}))},I=function(){return B&&C(!1)};return(0,_jsxRuntime.jsxs)(_SuggestedHourButton.SCSHBWrapper,{active:p,onKeyDown:function handleKeyPress(a){var d=a.key,e=a.shiftKey,f=a.target;if(d===KEY_ENTER){if(q(!1),(t.hour!==b||t.minutes!==c)&&(t.hour||t.minutes)){var h;null===i||void 0===i||null===(h=i.suggestedConfirm)||void 0===h?void 0:h.call(i,!0),g({hour:t.hour,minutes:t.minutes,edited:x}),x&&y(!1)}t.hour||t.minutes||D(),F()}if(d===KEY_ESC){var j;null===i||void 0===i||null===(j=i.suggestedCancel)||void 0===j?void 0:j.call(i,!0),u({hour:b,minutes:c}),p&&q(!1),x&&y(!1),F()}if(!(e&&d===KEY_TAB)&&d===KEY_TAB&&f===l.current){if((t.hour!==b||t.minutes!==c)&&(t.hour||t.minutes)){var k;null===i||void 0===i||null===(k=i.suggestedConfirm)||void 0===k?void 0:k.call(i,!0),g({hour:t.hour,minutes:t.minutes,edited:x})}t.hour||t.minutes||t.hour===b&&t.minutes===c||D(),q(!1),y(!1),F()}},onMouseEnter:function handleMouseEnter(){return!B&&C(!0)},onMouseLeave:I,id:"SCSHBWrapper".concat(j),children:[(0,_jsxRuntime.jsx)(_InputHour.InputHour,{label:LETTER_HOUR,isActive:p,time:t.hour,focusInput:!0,maxValue:MAX_HOUR,handleChangeValue:H,isSuggestion:!0,refInput:k}),(0,_jsxRuntime.jsx)(_InputHour.InputHour,{label:LETTER_MINUTES,isActive:p,time:t.minutes,maxValue:MAX_MINUTES,handleChangeValue:H,isSuggestion:!0,refInput:l}),B&&!p&&(0,_jsxRuntime.jsx)(_SuggestedHourButton.SCSHBWrapperModalOptions,{id:"SCSHBWrapperModalOptions".concat(j),ref:m,children:(0,_jsxRuntime.jsx)(_ModalSuggestionOptions.ModalSuggestionOptions,{handleEditHour:function handleStartEdition(){var a;I(),p||q(!0),null===i||void 0===i||null===(a=i.suggestedEdit)||void 0===a?void 0:a.call(i,!0),y(!0),G()},handleDenyHour:D,handleConfirmHour:function handleConfirmHour(){var a;null===i||void 0===i||null===(a=i.suggestedConfirm)||void 0===a?void 0:a.call(i,!0),g({hour:t.hour,minutes:t.minutes,edited:!1})},wordings:h})})]})};exports.SuggestedHourButton=SuggestedHourButton;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNQVhfSE9VUiIsIk1BWF9NSU5VVEVTIiwiTEVUVEVSX0hPVVIiLCJMRVRURVJfTUlOVVRFUyIsIktFWV9FTlRFUiIsIktFWV9FU0MiLCJLRVlfVEFCIiwiU3VnZ2VzdGVkSG91ckJ1dHRvbiIsImhvdXIiLCJtaW51dGVzIiwiaGFuZGxlRGVsZXRlU3VnZ2VzdGlvbiIsImhhbmRsZUFjY2VwdFN1Z2dlc3Rpb24iLCJ3b3JkaW5ncyIsImV2ZW50TG9nIiwidGFza0lkIiwiSE9VUl9SRUYiLCJ1c2VSZWYiLCJNSU5VVEVfUkVGIiwiTU9EQUxfUkVGIiwidXNlU3RhdGUiLCJpc0FjdGl2ZSIsInNldElzQWN0aXZlIiwidGltZSIsInNldFRpbWUiLCJpc0VkaXRlZCIsInNldElzRWRpdGVkIiwic2hvd01vZGFsT3B0aW9ucyIsInNldFNob3dNb2RhbE9wdGlvbnMiLCJoYW5kbGVEZWxldGVIb3VyIiwic3VnZ2VzdGVkRGVsZXRlIiwiZWxlbWVudFRyYXNoSWNvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJlbmFibGVkVHJhc2hCdXR0b24iLCJlbGVtZW50Iiwic3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsImRpc2FibGVkVHJhc2hCdXR0b24iLCJkaXNwbGF5IiwidXNlRWZmZWN0IiwiZXZhbENsaWNrIiwiZXZlbnQiLCJwYXRoIiwiY29tcG9zZWRQYXRoIiwic29tZSIsImlkIiwiaW5jbHVkZXMiLCJzdWdnZXN0ZWRDb25maXJtIiwiZWRpdGVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVDaGFuZ2VJbnB1dCIsInZhbHVlIiwib3JpZ2luIiwiaGFuZGxlTW91c2VMZWF2ZSIsImhhbmRsZUtleVByZXNzIiwia2V5Iiwic2hpZnRLZXkiLCJ0YXJnZXQiLCJzdWdnZXN0ZWRDYW5jZWwiLCJjdXJyZW50IiwiaGFuZGxlTW91c2VFbnRlciIsImhhbmRsZVN0YXJ0RWRpdGlvbiIsInN1Z2dlc3RlZEVkaXQiLCJoYW5kbGVDb25maXJtSG91ciJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL25ldy1pbnB1dC1ob3VyL3N1Z2dlc3RlZC1idXR0b24vU3VnZ2VzdGVkSG91ckJ1dHRvbi50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRkMsIEtleWJvYXJkRXZlbnQsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgSW5wdXRIb3VyIH0gZnJvbSAnLi4vSW5wdXRIb3VyL0lucHV0SG91cidcbmltcG9ydCB7IFRpbWVQcm9wcyB9IGZyb20gJy4uL0lucHV0SG91ckJ1dHRvbi5pbnRlcmZhY2UnXG5pbXBvcnQgeyBNb2RhbFN1Z2dlc3Rpb25PcHRpb25zIH0gZnJvbSAnLi9tb2RhbC1zdWdnZXN0aW9uLW9wdGlvbnMvTW9kYWxTdWdnZXN0aW9uT3B0aW9ucydcbmltcG9ydCB7IFN1Z2dlc3Rpb25Ib3VyQnV0dG9uUHJvcHMgfSBmcm9tICcuL1N1Z2dlc3RlZEhvdXJCdXR0b24uaW50ZXJmYWNlJ1xuaW1wb3J0IHsgU0NTSEJXcmFwcGVyLCBTQ1NIQldyYXBwZXJNb2RhbE9wdGlvbnMgfSBmcm9tICcuL1N1Z2dlc3RlZEhvdXJCdXR0b24uc3R5bGUnXG5cbmNvbnN0IE1BWF9IT1VSID0gMjRcbmNvbnN0IE1BWF9NSU5VVEVTID0gNjBcbmNvbnN0IExFVFRFUl9IT1VSID0gJ2gnXG5jb25zdCBMRVRURVJfTUlOVVRFUyA9ICdtJ1xuY29uc3QgS0VZX0VOVEVSID0gJ0VudGVyJ1xuY29uc3QgS0VZX0VTQyA9ICdFc2NhcGUnXG5jb25zdCBLRVlfVEFCID0gJ1RhYidcblxuZXhwb3J0IGNvbnN0IFN1Z2dlc3RlZEhvdXJCdXR0b246IEZDPFN1Z2dlc3Rpb25Ib3VyQnV0dG9uUHJvcHM+ID0gKHtcbiAgaG91cixcbiAgbWludXRlcyxcbiAgaGFuZGxlRGVsZXRlU3VnZ2VzdGlvbiA9ICgpID0+IG51bGwsXG4gIGhhbmRsZUFjY2VwdFN1Z2dlc3Rpb24gPSAoKSA9PiBudWxsLFxuICB3b3JkaW5ncyxcbiAgZXZlbnRMb2csXG4gIHRhc2tJZCxcbn0pID0+IHtcbiAgY29uc3QgSE9VUl9SRUYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbClcbiAgY29uc3QgTUlOVVRFX1JFRiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKVxuICBjb25zdCBNT0RBTF9SRUYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IFtpc0FjdGl2ZSwgc2V0SXNBY3RpdmVdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG4gIGNvbnN0IFt0aW1lLCBzZXRUaW1lXSA9IHVzZVN0YXRlPFRpbWVQcm9wcz4oeyBob3VyOiAwLCBtaW51dGVzOiAwIH0pXG4gIGNvbnN0IFtpc0VkaXRlZCwgc2V0SXNFZGl0ZWRdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG4gIGNvbnN0IFtzaG93TW9kYWxPcHRpb25zLCBzZXRTaG93TW9kYWxPcHRpb25zXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuXG4gIGNvbnN0IGhhbmRsZURlbGV0ZUhvdXIgPSAoKSA9PiB7XG4gICAgZXZlbnRMb2c/LnN1Z2dlc3RlZERlbGV0ZT8uKHRydWUpXG4gICAgaGFuZGxlRGVsZXRlU3VnZ2VzdGlvbigpXG4gICAgaXNFZGl0ZWQgJiYgc2V0SXNFZGl0ZWQoZmFsc2UpXG4gIH1cblxuICBjb25zdCBlbGVtZW50VHJhc2hJY29uID0gKCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYFNDV3JhcHBlckljb25UcmFzaC0ke3Rhc2tJZH1gKVxuXG4gIGNvbnN0IGVuYWJsZWRUcmFzaEJ1dHRvbiA9ICgpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudFRyYXNoSWNvbigpXG4gICAgZWxlbWVudD8uc3R5bGU/LnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5JylcbiAgfVxuICBjb25zdCBkaXNhYmxlZFRyYXNoQnV0dG9uID0gKCkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50VHJhc2hJY29uKClcbiAgICBpZiAoZWxlbWVudCkgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4gc2V0VGltZSh7IGhvdXIsIG1pbnV0ZXMgfSksIFtob3VyLCBtaW51dGVzXSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGV2YWxDbGljayA9IGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHBhdGggPSBldmVudC5wYXRoIHx8IChldmVudC5jb21wb3NlZFBhdGggJiYgZXZlbnQuY29tcG9zZWRQYXRoKCkpXG4gICAgICBpZiAoXG4gICAgICAgICFwYXRoLnNvbWUoXG4gICAgICAgICAgKHsgaWQgfSkgPT4gaWQ/LmluY2x1ZGVzPy4oYFNDU0hCV3JhcHBlciR7dGFza0lkfWApIHx8IGlkPy5pbmNsdWRlcz8uKGBTQ1NIQldyYXBwZXJNb2RhbE9wdGlvbnMke3Rhc2tJZH1gKVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgICAgc2V0SXNBY3RpdmUoZmFsc2UpXG4gICAgICAgICAgaWYgKCh0aW1lLmhvdXIgIT09IGhvdXIgfHwgdGltZS5taW51dGVzICE9PSBtaW51dGVzKSAmJiAodGltZS5ob3VyIHx8IHRpbWUubWludXRlcykpIHtcbiAgICAgICAgICAgIGV2ZW50TG9nPy5zdWdnZXN0ZWRDb25maXJtPy4odHJ1ZSlcbiAgICAgICAgICAgIGhhbmRsZUFjY2VwdFN1Z2dlc3Rpb24oe1xuICAgICAgICAgICAgICBob3VyOiB0aW1lLmhvdXIsXG4gICAgICAgICAgICAgIG1pbnV0ZXM6IHRpbWUubWludXRlcyxcbiAgICAgICAgICAgICAgZWRpdGVkOiBpc0VkaXRlZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzZXRJc0VkaXRlZChmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0aW1lLmhvdXIgJiYgIXRpbWUubWludXRlcykge1xuICAgICAgICAgICAgaGFuZGxlRGVsZXRlSG91cigpXG4gICAgICAgICAgfVxuICAgICAgICAgIGVuYWJsZWRUcmFzaEJ1dHRvbigpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmFsQ2xpY2spXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmFsQ2xpY2spXG4gICAgfVxuICB9LCBbaXNBY3RpdmUsIHRpbWUsIGlzRWRpdGVkXSlcblxuICBjb25zdCBoYW5kbGVLZXlQcmVzcyA9ICh7IGtleSwgc2hpZnRLZXksIHRhcmdldCB9OiBLZXlib2FyZEV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGtleSA9PT0gS0VZX0VOVEVSKSB7XG4gICAgICBzZXRJc0FjdGl2ZShmYWxzZSlcbiAgICAgIGlmICgodGltZS5ob3VyICE9PSBob3VyIHx8IHRpbWUubWludXRlcyAhPT0gbWludXRlcykgJiYgKHRpbWUuaG91ciB8fCB0aW1lLm1pbnV0ZXMpKSB7XG4gICAgICAgIGV2ZW50TG9nPy5zdWdnZXN0ZWRDb25maXJtPy4odHJ1ZSlcbiAgICAgICAgaGFuZGxlQWNjZXB0U3VnZ2VzdGlvbih7XG4gICAgICAgICAgaG91cjogdGltZS5ob3VyLFxuICAgICAgICAgIG1pbnV0ZXM6IHRpbWUubWludXRlcyxcbiAgICAgICAgICBlZGl0ZWQ6IGlzRWRpdGVkLFxuICAgICAgICB9KVxuICAgICAgICBpc0VkaXRlZCAmJiBzZXRJc0VkaXRlZChmYWxzZSlcbiAgICAgIH1cbiAgICAgIGlmICghdGltZS5ob3VyICYmICF0aW1lLm1pbnV0ZXMpIHtcbiAgICAgICAgaGFuZGxlRGVsZXRlSG91cigpXG4gICAgICB9XG4gICAgICBlbmFibGVkVHJhc2hCdXR0b24oKVxuICAgIH1cbiAgICBpZiAoa2V5ID09PSBLRVlfRVNDKSB7XG4gICAgICBldmVudExvZz8uc3VnZ2VzdGVkQ2FuY2VsPy4odHJ1ZSlcbiAgICAgIHNldFRpbWUoeyBob3VyLCBtaW51dGVzIH0pXG4gICAgICBpc0FjdGl2ZSAmJiBzZXRJc0FjdGl2ZShmYWxzZSlcbiAgICAgIGlzRWRpdGVkICYmIHNldElzRWRpdGVkKGZhbHNlKVxuICAgICAgZW5hYmxlZFRyYXNoQnV0dG9uKClcbiAgICB9XG4gICAgaWYgKCEoc2hpZnRLZXkgJiYga2V5ID09PSBLRVlfVEFCKSAmJiBrZXkgPT09IEtFWV9UQUIgJiYgdGFyZ2V0ID09PSBNSU5VVEVfUkVGLmN1cnJlbnQpIHtcbiAgICAgIGlmICgodGltZS5ob3VyICE9PSBob3VyIHx8IHRpbWUubWludXRlcyAhPT0gbWludXRlcykgJiYgKHRpbWUuaG91ciB8fCB0aW1lLm1pbnV0ZXMpKSB7XG4gICAgICAgIGV2ZW50TG9nPy5zdWdnZXN0ZWRDb25maXJtPy4odHJ1ZSlcbiAgICAgICAgaGFuZGxlQWNjZXB0U3VnZ2VzdGlvbih7XG4gICAgICAgICAgaG91cjogdGltZS5ob3VyLFxuICAgICAgICAgIG1pbnV0ZXM6IHRpbWUubWludXRlcyxcbiAgICAgICAgICBlZGl0ZWQ6IGlzRWRpdGVkLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKCF0aW1lLmhvdXIgJiYgIXRpbWUubWludXRlcyAmJiAodGltZS5ob3VyICE9PSBob3VyIHx8IHRpbWUubWludXRlcyAhPT0gbWludXRlcykpIHtcbiAgICAgICAgaGFuZGxlRGVsZXRlSG91cigpXG4gICAgICB9XG4gICAgICBzZXRJc0FjdGl2ZShmYWxzZSlcbiAgICAgIHNldElzRWRpdGVkKGZhbHNlKVxuICAgICAgZW5hYmxlZFRyYXNoQnV0dG9uKClcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVDaGFuZ2VJbnB1dCA9ICh2YWx1ZTogbnVtYmVyLCBvcmlnaW46IHN0cmluZykgPT5cbiAgICBvcmlnaW4gPT09IExFVFRFUl9IT1VSID8gc2V0VGltZSh7IC4uLnRpbWUsIGhvdXI6IHZhbHVlIH0pIDogc2V0VGltZSh7IC4uLnRpbWUsIG1pbnV0ZXM6IHZhbHVlIH0pXG5cbiAgY29uc3QgaGFuZGxlTW91c2VFbnRlciA9ICgpID0+ICFzaG93TW9kYWxPcHRpb25zICYmIHNldFNob3dNb2RhbE9wdGlvbnModHJ1ZSlcblxuICBjb25zdCBoYW5kbGVNb3VzZUxlYXZlID0gKCkgPT4gc2hvd01vZGFsT3B0aW9ucyAmJiBzZXRTaG93TW9kYWxPcHRpb25zKGZhbHNlKVxuXG4gIGNvbnN0IGhhbmRsZVN0YXJ0RWRpdGlvbiA9ICgpID0+IHtcbiAgICBoYW5kbGVNb3VzZUxlYXZlKClcbiAgICAhaXNBY3RpdmUgJiYgc2V0SXNBY3RpdmUodHJ1ZSlcbiAgICBldmVudExvZz8uc3VnZ2VzdGVkRWRpdD8uKHRydWUpXG4gICAgc2V0SXNFZGl0ZWQodHJ1ZSlcbiAgICBkaXNhYmxlZFRyYXNoQnV0dG9uKClcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUNvbmZpcm1Ib3VyID0gKCkgPT4ge1xuICAgIGV2ZW50TG9nPy5zdWdnZXN0ZWRDb25maXJtPy4odHJ1ZSlcbiAgICBoYW5kbGVBY2NlcHRTdWdnZXN0aW9uKHtcbiAgICAgIGhvdXI6IHRpbWUuaG91cixcbiAgICAgIG1pbnV0ZXM6IHRpbWUubWludXRlcyxcbiAgICAgIGVkaXRlZDogZmFsc2UsXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPFNDU0hCV3JhcHBlclxuICAgICAgYWN0aXZlPXtpc0FjdGl2ZX1cbiAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5UHJlc3N9XG4gICAgICBvbk1vdXNlRW50ZXI9e2hhbmRsZU1vdXNlRW50ZXJ9XG4gICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XG4gICAgICBpZD17YFNDU0hCV3JhcHBlciR7dGFza0lkfWB9XG4gICAgPlxuICAgICAgPElucHV0SG91clxuICAgICAgICBsYWJlbD17TEVUVEVSX0hPVVJ9XG4gICAgICAgIGlzQWN0aXZlPXtpc0FjdGl2ZX1cbiAgICAgICAgdGltZT17dGltZS5ob3VyfVxuICAgICAgICBmb2N1c0lucHV0XG4gICAgICAgIG1heFZhbHVlPXtNQVhfSE9VUn1cbiAgICAgICAgaGFuZGxlQ2hhbmdlVmFsdWU9e2hhbmRsZUNoYW5nZUlucHV0fVxuICAgICAgICBpc1N1Z2dlc3Rpb25cbiAgICAgICAgcmVmSW5wdXQ9e0hPVVJfUkVGfVxuICAgICAgLz5cbiAgICAgIDxJbnB1dEhvdXJcbiAgICAgICAgbGFiZWw9e0xFVFRFUl9NSU5VVEVTfVxuICAgICAgICBpc0FjdGl2ZT17aXNBY3RpdmV9XG4gICAgICAgIHRpbWU9e3RpbWUubWludXRlc31cbiAgICAgICAgbWF4VmFsdWU9e01BWF9NSU5VVEVTfVxuICAgICAgICBoYW5kbGVDaGFuZ2VWYWx1ZT17aGFuZGxlQ2hhbmdlSW5wdXR9XG4gICAgICAgIGlzU3VnZ2VzdGlvblxuICAgICAgICByZWZJbnB1dD17TUlOVVRFX1JFRn1cbiAgICAgIC8+XG4gICAgICB7c2hvd01vZGFsT3B0aW9ucyAmJiAhaXNBY3RpdmUgJiYgKFxuICAgICAgICA8U0NTSEJXcmFwcGVyTW9kYWxPcHRpb25zIGlkPXtgU0NTSEJXcmFwcGVyTW9kYWxPcHRpb25zJHt0YXNrSWR9YH0gcmVmPXtNT0RBTF9SRUZ9PlxuICAgICAgICAgIDxNb2RhbFN1Z2dlc3Rpb25PcHRpb25zXG4gICAgICAgICAgICBoYW5kbGVFZGl0SG91cj17aGFuZGxlU3RhcnRFZGl0aW9ufVxuICAgICAgICAgICAgaGFuZGxlRGVueUhvdXI9e2hhbmRsZURlbGV0ZUhvdXJ9XG4gICAgICAgICAgICBoYW5kbGVDb25maXJtSG91cj17aGFuZGxlQ29uZmlybUhvdXJ9XG4gICAgICAgICAgICB3b3JkaW5ncz17d29yZGluZ3N9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9TQ1NIQldyYXBwZXJNb2RhbE9wdGlvbnM+XG4gICAgICApfVxuICAgIDwvU0NTSEJXcmFwcGVyPlxuICApXG59XG4iXSwibWFwcGluZ3MiOiJpdUNB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